# homework16 Сбор и анализ логов
logserv.txt - конфигурация сервера сбора логов. Ключевые моменты:
  /etc/rsyslog.conf Настройка модуля приема логов по порту 514, (строки 18,19,22,23)
                    Настройка шаблона для принимаемых логов (строки 96-98)
  /etc/audit/auditd.conf настройка демона аудита на прием событий по порту 60 (строка 129)
  Проверяем прослушиваемые порты ss -tuln (строка 140), видим слушаются порты 514 и 60.

webserv.txt - конфигурация web сервера для отправки логов. Ключевые моменты:
   /etc/nginx/nginx.conf Настройка сервера сбора логов. Добавляем параметры для отправки сообщений об ошибках и доступе на сервер error_log syslog:server=192.168.56.15:514,tag=nginx_error и access_log syslog:server=192.168.56.15:514,tag=nginx_access,severity=info combined; (строки 11 и 27)
  /etc/audit/rules.d/audit.rules Настройка правил аудита на изменение конфигурации nginx. Добавляем правила -w /etc/nginx/nginx.conf -p wa -k nginx_conf и -w /etc/nginx/default.d/ -p wa -k nginx_conf (строки 100 и 101)
  Для настройки пересылки событий аудита на лог сервер потребуется пакет audispd-plugins (строка 104)
  Настройка /etc/audit/auditd.conf добавляем параметр name_format = HOSTNAME для отображения в пересылаемых логах имени хоста (строка 123)
  /etc/audisp/plugins.d/au-remote.conf включаем функционал пересылки логов, параметр active = yes (строка 151)
  /etc/audisp/audisp-remote.conf настраиваем адрес и порт сервера сбора логов (строки 165, 166)

access_log.png - на лог сервере видим сообщения о доступе на веб сервер.
error_log.png - на лог сервере видим ошибки с веб сервера.
web_audit_log_on_syslog_server.png - на лог сервере видим сообщения аудита об изменении конфигурации и атрибутов /etc/nginx/nginx.conf 
audit_log_web_local.png - проверка локальных логов аудита на веб сервере перед настройкой их пересылки на лог сервер.
